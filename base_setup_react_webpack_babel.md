# Base setup for React-Webpack-Babel

As you may know, a lot of React boilerplate projects are around there, but most of the them not fit our needs. In this articale I'll not reflect how to boilerplate a project, I'll try to show you how to setup your own project without boilerplate project.

In this article we'll setup a project using our lovely React framework, packaging it with Webpack and of course we'll deal with amazing
Babel and Hot Realoading feature.

But, Why not [create-react-app](https://github.com/facebookincubator/create-react-app)? 
Yes, this is great way to bootstrap a boilerplate React project and it is introduced by Facebook, but it comes without any build confguration. I would recommend it for the begginers who is getting started with React, for those who don't bother with a setup of Webpack, Babel and Hot Reloading.

At some point we faced a situation when you need some build/packaging tools around your React project. 

I hope this article will help you into setting basic project structure and correct build configurations. Enough, let's start our base setup for React(Webpack, Babel, Hot Reloading) project.

## Table of Contents

- [Project Setup](https://github.com/ioviic/articles_content/blob/base-setup-for-webpack-babel/base_setup_react_webpack_babel.md#project-setup)
- [Webpack Setup](https://github.com/ioviic/articles_content/blob/base-setup-for-webpack-babel/base_setup_react_webpack_babel.md#webpack-setup)
  - [Hot Reloading](https://github.com/ioviic/articles_content/blob/base-setup-for-webpack-babel/base_setup_react_webpack_babel.md#hot-reloading)
- [Babel Setup](https://github.com/ioviic/articles_content/blob/base-setup-for-webpack-babel/base_setup_react_webpack_babel.md#babel-setup)
- [React Setup](https://github.com/ioviic/articles_content/blob/base-setup-for-webpack-babel/base_setup_react_webpack_babel.md#react-setup)

## Project Setup

Let's start with the begining, you'll need some development env. setup to start. So, make sure you have an editor and terminal on your computer, also check if you have an installed version of [node and npm](https://nodejs.org/en/).

In this chapter we will focus on setting up the project. Open you terminal and create a folder for our project, after initialize it as npm project.

```bat
mkdir base-react-boilerplate
cd base-react-boilerplate
npm init -y
```
```-y``` will initialize our projects with default configurations and generates the _package.json_ file. This file contains the configuration and intalled node packages and scripts, for now we do not have some packages intalled, we'll add some later on.

We will need a folder that will serve our single page application(SPA), let's call it _distribution_ or simply _dist_ folder. Basicaly this folder will contain **2 files**, one _.html_ file as an entry point for our application, and one _.js_ file  generated by Webpack. Webpack will generate this file from all javascript source files.

```bat
mkdir dist
cd dist
touch index.html
```

for MAC in terminal ```touch index.html``` creates _index.html_ file above mentioned. For Windows users you can use ```echo``` command, example bellow:

_dist folder_
```but
echo some-text >index.html
```

Add following content in created file:

_dist/index.html_

```html
<!DOCTYPE html>
<html>
  <head>
      <title>Base setup for React-Webpack-Babel</title>
  </head>
  <body>
    <div id="app"></div>
    <script src="bundle.js"></script>
  </body>
</html>
```

If you look at the content of the body, you can see:

1. _bundle.js_ the file that will be generated by Webpack
2. _id="app"_ will be entry point for React root component

## Webpack Setup

Now, it's time to take a look at [Webapack](https://webpack.js.org/) the module bundler and build tool. Also we'll use [webpack-dev-server](https://github.com/webpack/webpack-dev-server) as local development server. Development server will watch for our changes and rerun the bundler.

We need to install these two packages:

_root folder_
```bat
npm install --save-dev webpack webpack-dev-server
```
_Tip: you can use npm i instead of npm install._

```--save-dev``` will add these packages as dev dependencies in _package.json_ file. You may notice that new folder has been created _node_modules_, this folder contains installed third party dependencies. Our project structure now should look similar prsented bellow

```
- dist
-- index.html
- node_modules
- package.json
```

Ok, we installed webpack. Now, we need to create webpack config file ```webpack.config.js```.

_Tip: as you may noticed before you can create files by using touch command_ - ```touch FILENAME``` on MAC and ```echo``` command for Windows users.

_root folder_

```bat
touch webpack.config.js
```

Open created file and provide following content

_webpack.config.js_
```javascript
module.exports = {
  entry: [
    './src/index.js'
  ],
  output: {
    path: __dirname + '/dist',
    publicPath: '/',
    filename: 'bundle.js'
  },
  devServer: {
    contentBase: './dist'
  }
};
```

It is important to understand what is going on so far. This tells webpack that in ```src``` folder the main application file ```index.js``` is the entry point, and bundled application ```bundle.js``` file should be outputted in ```dist``` folder. As mentioned before ```dist``` folder will be used to serve our application.

We are missing source files. Let's add them. 

But first we gonna create the ```src``` folder, where we put source code files. After create ```index.js```, our entry point.

_root folder_


```bat
mkdir src
cd src
touch index.js
``` 
Open newly created ```index.js``` file and add some ```console.log```

```javascript
console.log('Base setup for React-Webpack-Babel');
```

Now folder structure should be similar to this structure.

```bat
- dist
-- index.html
- node_modules
- src
-- index.js
- package.json
- webpack.config.js
```

We added some source files, now open ```package.json``` file and add 'start' script.
```javascript
...
"scripts": {
  "start": "webpack-dev-server --progress --colors --hot --config ./webpack.config.js",
  ...
},
...

```
We tell that we will use webpack-dev-server with configuration file ```webpack.config.js```.

Now we are able to start our project

_root folder_

```bat
npm start
```

Open in your browser [localhost:8080](http://localhost:8080), and check console in development tools. 

To recap, now we are serving the app via Webpack, we bundle the ```src/index.js``` into ```bundle.js``` that we used in ```dist/index.html``` and we are able to see the ```console.log()``` text. Right now we have only one source file which is ```src/index.js```, but we gonna to add more files and import them into ```index.js``` file later on, which will get bundle automatically by Webpack into ```bundle.js```.
 
### Hot Reloading

Let's make our developer life easier and add [react-hot-loader](https://github.com/gaearon/react-hot-loader). Why? Beacuse it enables fast feedback in development process, whenever you change something in your source code, the change will apply in your app running in the browser but _**not realoading the entire page**_, and this makes id __HOT__ :D. It use Hot Module Replacement(or [HMR](https://webpack.js.org/guides/hot-module-replacement/)) feature of Webpack, and i'll say this is the most powerfull Webpack feature, it allows all kinds of modules to be updated at runtime without the need for a full refresh. Pretty neat, right.

_root folder_

```bat
npm install --save-dev react-hot-loader
```

Now, we need to change a little bit ```webpack.config.js``` file.

_webpack.config.js_
```javascript
module.exports = {
  entry: [
  ...
    'webpack-dev-server/client?http://localhost:8080',
    'webpack/hot/only-dev-server',
  ...
    './src/index.js'
  ],
  output: {
    path: __dirname + '/dist',
    publicPath: '/',
    filename: 'bundle.js'
  },
  devServer: {
    contentBase: './dist',
    ...
    hot: true
    ...
  }
};
```

Add in ```src/index.js``` following:

_src/index.js_
```javascript
console.log('Base setup for React-Webpack-Babel');
...
module.hot.accept();
...
```
```module.hot.accept();``` define that hot reloading is available and should be used.

Let's start app now
_root folder_

```
npm start
```

If look to the browser [localhost:8080](http://localhost:8080), and check console in development tools, same ```console.log()``` text is showen, but if changes the text of it ```index.js``` file you should see updated content in you development console.

## Babel Setup

Basically [Babel](https://babeljs.io) will transpile our fancy ES6 to ES5 which can be understood by browsers (some browsers can execute ES6 already, but most of them still canâ€™t).

_root folder_

```bat
npm install --save-dev babel-core babel-loader babel-preset-es2015
```
I want to mention here that, not only ES6 features Babel can transpile, but also the next generations of ES. **WOW**

For example if you want to use feature as [spread operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator) you can do this via [stages](https://babeljs.io/docs/plugins/preset-stage-0/).

_root folder_
```bat
npm install --save-dev babel-preset-stage-2
```

For the sake of convenience, as soon as we use React we need to add more configuation which will React ```*.jsx``` files to ```*.js```files so we have to install babel react preset.

_root folder_
```bat
npm install --save-dev babel-preset-react
```

With these intalled we have to adjust our ```package.json``` and ```webpack.config.js``` and let Babel to work.

Add in ```package.json```:
_package.json_

```json
...
"babel": {
  "presets": [
    "es2015",
    "react",
    "stage-2"
  ]
},
...
```
These changes include all babel packages we've installed.

_webpack.config.js_
```javascript
module.exports = {
  entry: [
    'webpack-dev-server/client?http://localhost:8080',
    'webpack/hot/only-dev-server',
    './src/index.js'
  ],
  ...
  module: {
    loaders: [{
      test: /\.jsx?$/,
      exclude: /node_modules/,
      loader: 'react-hot-loader!babel-loader'
    }]
  },
  resolve: {
    extensions: ['*', '.js', '.jsx']
  },
  ...
  output: {
    path: __dirname + '/dist',
    publicPath: '/',
    filename: 'bundle.js'
  },
  devServer: {
    contentBase: './dist',
    hot: true
  }
};
```
our application can't start now, cause it dosen't now about React. So let's dive in and create our first React component.

## React Setup

We have to install two more packages and fix the start of our app.

_root folder_

```bat
npm install --save react react-dom
```

Open ```src/index.js``` file and implement our first React component. **WIIIIII**

_src/index.js_

```javascript
import React from 'react';
import ReactDOM from 'react-dom';

const title = 'Base setup for React-Webpack-Babel';

ReactDOM.render(
  <div>{title}</div>,//our jsx component to render
  document.getElementById('app')
);

module.hot.accept();
```

You should be able to see the output in your browser rather than in a developer console now.

What we can see here, is two things (1) ```ReactDOM.render``` needs the ```jsx``` to render (```<div>{title}</div>```), (2) needs the root node(```document.getElementById('app')```) where your output should be appended, everything inside this node element will be managed by React DOM.
